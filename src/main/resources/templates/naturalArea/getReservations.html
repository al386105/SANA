<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<body>
<div th:replace="fragments/headerManager"></div>

<div class="container">

    <!-- TODO VISTA POR HACER -->
    <h2 class="text-uppercase text-center text-secondary mb-0"> Lista de reservas </h2>
    <br><hr class="barra-normal"><br>

    <h3>POR HACER!!!</h3>
    <div th:if="${#lists.isEmpty(reservations)}">
        <div th:if="${#strings.equals(naturalArea.typeOfAccess.name(), 'nonRestricted')}">
            <p><b>¡Este área natural no es restringida y no tiene reservas!</b></p>
        </div>
        <div th:unless="${#strings.equals(naturalArea.typeOfAccess.name(), 'nonRestricted')}">
            <p><b>¡Este área natural no ha tenido ninguna reserva!</b></p>
        </div>
    </div>
    <div th:unless="${#lists.isEmpty(reservations)}">
        <div th:if="${#strings.equals(naturalArea.typeOfAccess.name(), 'nonRestricted')}">
            <p><b>Este área natural no es restringida, pero en un pasado sí, y éstas fueron sus reservas:</b></p>
        </div>
    <table class="table table-striped">
        <thead>
        <tr>
        <tr>
            <th scope="col">Fecha reserva</th>
            <th scope="col">Número reserva</th>
            <th scope="col">Fecha creación</th>
            <th scope="col">Hora creación</th>
            <th scope="col">Num. personas</th>
            <th scope="col">Estado</th>
            <th scope="col">Código QR</th>
            <th scope="col">Fecha cancelación</th>
            <th scope="col">Razón cancelación</th>
            <th scope="col">Email ciudadano</th>
            <th scope="col">Franja horaria id</th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="reservation: ${#lists.sort(reservations)}">
            <td scope="row" th:text="${#temporals.format(reservation.reservationDate,'dd/MM/yyyy')}"></td>
            <td th:text="${reservation.reservationNumber}"></td>
            <td th:text="${#temporals.format(reservation.creationDate,'dd/MM/yyyy')}"></td>
            <td th:text="${#temporals.format(reservation.creationTime,'HH:mm')}"></td>
            <td th:text="${reservation.numberOfPeople}"></td>
            <td th:text="${reservation.state.descripcion}"></td>
            <td th:text="${reservation.QRcode}"></td>
            <td th:text="${#temporals.format(reservation.cancellationDate,'dd/MM/yyyy')}"></td>
            <td th:text="${reservation.cancellationReason}"></td>
            <td th:text="${reservation.citizenEmail}"></td>
            <td th:text="${reservation.timeSlotId}"></td>
            <td><a th:href="@{/reservation/getForManagers/{reservationNumber}(reservationNumber=${reservation.reservationNumber})}">
                <button type="button" class="btn btn-warning">Más información</button>
            </a>
            </td>
            <td><a th:href="@{/reservation/updateManagers/{reservationNumber}(reservationNumber=${reservation.reservationNumber})}">
                <button type="button" class="btn btn-warning">Modifica</button>
            </a>
            </td>
            <td><a th:href="@{/reservation/cancelManagers/{reservationNumber}(reservationNumber=${reservation.reservationNumber})}">
                <button type="button" class="btn btn-danger">Cancela</button>
            </a>
            </td>
        </tr>
        </tbody>
    </table>
    </div>
    <br>
    <a href="/naturalArea/listForManagers"><button type="button" class="btn btn-primary">Volver</button></a>
    <br><br>
</div>

<div th:replace="fragments/footer"></div>
</body>
</html>

